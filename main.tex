\documentclass[a4paper, 12pt]{article}

\usepackage[utf8]{inputenc}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{float}
\usepackage{placeins}
\usepackage{xstring}
\usepackage[hidelinks]{hyperref}
\usepackage{cleveref}

% \usepackage{geometry}
% \geometry{tmargin=3cm, bmargin=2.2cm, lmar2.2cm, rmargin=2cm}

% Geen geÃ¯ndenteerde paragrafen, da's maar lelijk.
\setlength{\parindent}{0pt}
% Wel spatie tussen paragrafen please.
\setlength{\parskip}{1em}

% Necessary to make space->underscore substitution work. 
\usepackage[T1]{fontenc}
% Command that typesets variables in fixed width font, and with spaces automatically replaced by underscores.
\newcommand{\var}[1]{\texttt{\StrSubstitute{#1}{ }{\_\allowbreak}}}

% For identifying individual datapoints -- i.e. cars.
\newcommand{\car}[1]{\textit{``#1''}}

% For figures accross the page -- wider than the text width
\newcommand{\widefig}[1]{\makebox[\textwidth][c]{\includegraphics[width=0.9\paperwidth]{#1}}%
}

\newcommand{\sectionref}[1]{section ``\nameref{#1}''}

\begin{document}


\input{titlepage}


\section{Linear regression}

The complete dataset of 1500 cars was split into a 1000-car training set and a 500-car test set. We continue this analysis with the training set.

\subsection*{Explorative analysis \& outlier removal}
\label{outlier_removal}

All variables were examined for univariate outliers. Both \var{noise level} and \var{nox emissions} contain an extreme outlier. (See \cref{extreme_outliers} in the appendix for supporting plots). They are the \car{Volkswagen Jetta (from NOV 06 Wk 45 >) -- 1.4 TSI (170 PS) Sport} with a \var{noise level} of 0.3, and the \car{Vauxhall Signum MY2008 -- 3.0CDTi V6 24v with 16/17/18" wheel} with a \var{nox emissions} value of 237000, respectively. They were removed from the training set.

No additional strong univariate outliers (that could have a strong influence on the subsequent regression and classification tasks) were found. See \cref{jitterboxes} in the appendix for supporting plots.

\begin{figure}
  \widefig{img/pairs.pdf}
  \caption{Uni- and bivariate sample distributions (after the two extreme outliers have been removed, as described in \sectionref{outlier_removal}).}
  \label{pairs}
\end{figure}

\Cref{pairs} shows the uni- and bivariate sample distributions. Note the very strong correlations between \var{urban metric}, \var{extra urban metric}, \var{combined metric}, and \var{co2} -- and to a lesser extend \var{engine capacity}. This is in accordance with their meanings: all three \var{ metrics} measure fuel consumption; and cars with larger engine volumes consume more liters of fuel, and every liter of fuel corresponds to a fixed amount of $\mathrm{CO_2}$.

We also note that for the variable \var{noise level}, a large subset of cars take on discrete values. (There are also cars with \var{noise level}s in between). This discrete character would negatively impact a cluster analysis, as the clusters would tend to form around the disrete values; other variables would have disproportionately less impact on the clustering. However, we decide this does not impact the subsequent regression and classification tasks too much, so we keep this variable for now.

(multivariate outliers: robust center \& scale, mahalonobis distance)

\subsection*{Variable transformation}
\subsection*{Variable selection}
\subsection*{Linear model}
\subsection*{Gauss-Markov conditions}

\section{Classification}
\subsection*{Variable selection}
\subsection*{Logistic model}
\subsection*{Interpretation}
\subsection*{Apparent error rate}
\subsection*{Error rate on test set}
\subsection*{Linear discriminant analysis}
\subsection*{Quadratic discriminant analysis}
\subsection*{Comparison}

% \begin{table}[h!]
% \centering
% \begin{tabular}{r | l l l l l l l l }
% Eigenwaarde & 1    &  2  \\
% \hline
% Bijdrage    & 0.55 &  0.21  \\
% Cumulatief  & 0.55 &  0.76  \\
% \end{tabular}
% \caption{Relatieve bijdrage van elke eigenwaarde van de correlatiematrix aan de totale variantie van de data.}
% \label{PCA_eigenwaarden_bijdragen}
% \end{table}

\clearpage
\appendix

\section{Code}
% \subsection*{1.R}
% \lstinputlisting[basicstyle=\ttfamily\scriptsize,language=R,breaklines=true]{1.R}

\FloatBarrier
\section{Extra figures}

\begin{figure}
  \widefig{img/extreme_outliers_noise_level}
  \widefig{img/extreme_outliers_nox_emissions}
  \caption{Univariate point plots of two variables with extreme outliers. Vertical jitter has been added to mitigate overplotting;  this makes the distribution density more apparent.}
  \label{extreme_outliers}
\end{figure}


\begin{figure}
  \widefig{img/jitterbox_engine_capacity}
  \widefig{img/jitterbox_urban_metric}
  \widefig{img/jitterbox_extra_urban_metric}
  \widefig{img/jitterbox_combined_metric}
  \widefig{img/jitterbox_noise_level}
  \widefig{img/jitterbox_co2}
  \widefig{img/jitterbox_nox_emissions}
  \caption{Univariate distribution of each continuous variable, after the two extreme outliers have been removed (as described in \sectionref{outlier_removal}). These are boxplots overlaid with point plots, where vertical jitter has been added to mitigate overplotting.}
  \label{jitterboxes}
\end{figure}

\end{document}
